<!DOCTYPE html>
<html lang="pt-br">
    <head>
        
        <%- include('../partials/header') %>
        <title>Meu Perfil</title>

    </head>

    <body>

        <%- include('../partials/navbar_doador') %>

        <!------------ perfil ------------>
        <main id="perfil">
            <div class="container-fluid">
                <div class="jumbotron">
                    <h1 class="display-4"><%= nome %></h1>
                </div>

                <div id="info">
                    <div id="info_pessoa">

                        <h4 class="topicos">ID:</h4>
                        <p class="dados"><%= id %></p>

                        <h4>E-MAIL:</h4>
                        <p class="dados"><%= email %></p>

                        <h4>CPF:</h4>
                        <p class="dados"><%= cpf %></p>

                        <h4>Data de nascimento:</h4>
                        <p class="dados"><%= data %></p>

                        <h4>Gênero:</h4>
                        <p class="dados"><%= genero %></p>

                        <h4>TELEFONE:</h4>
                        <p class="dados"><%= telefone %></p>

                    </div>

                    <div id="localizacao">
                        <h4>ENDEREÇO:</h4>
                        <p class="dados"><%= rua %></p>

                        <h4>CIDADE E ESTADO:</h4>
                        <p class="dados"><%= cidade %>, <%= estado %></p>
                    </div>
                </div>
            </div>
        </main>

        <div class="container">
            <div class="row">

                <div class="col-md-6 justify-content-center">
                    <button onclick="alterarDoador()" class="btn-outline-primary" style="color: white; border-radius: 12px;">
                        Alterar conta
                        <i class="bi bi-pencil"></i>
                    </button>
                </div>

                <div class="col-md-6 justify-content-center">
                    <button onclick="excluirDoador()" type="button" class="btn-outline-danger" style="color: white;">
                        Excluir conta
                        <i class="bi bi-trash"></i>
                    </button>
                </div>
            </div>
        </div> <br> <br>

        <!--Modal Alterar Dados pois o JS não reconhece <%= %>-->
        <script>
            function alterarDoador() {
                Swal.fire({
                    title: 'Alterar dados',
                    html:

                    //Formulário
                    '<form action="/Alt-Doador/<%= id %>?_method=PATCH" method="POST" style="overflow-x: hidden;">' +

                        //Email
                        '<div class="form-group">' +
                            '<label class="control-label">Email:</label> ' +
                            '<input class="form-control" type="email" name="novoEmailDoador" value="<%= email %>" required>' +
                        '</div>' +

                        //CPF
                        '<div class="form-group">' +
                            '<label class="control-label">CPF:</label>' +
                            '<input class="form-control" type="number" name="novoCPF" value="<%= cpf %>" required>' +
                        '</div>' +

                        //Nome
                        '<div class="form-group">' +
                            '<label class="control-label">Nome:</label>' + 
                            '<input class="form-control" type="text" name="novoNomeDoador" value="<%= nome %>" required>' +
                        '</div>' +

                        //Nascimento
                        '<div class="form-group">' +
                            '<label class="control-label">Data de nascimento:</label>' + 
                            '<input class="form-control" type="date" name="novaData" value="<%= data %>" required>' +
                        '</div>' +

                        //Gênero
                        '<div class="form-group">' +
                            '<label class="control-label">Gênero:</label>' +
                            '<select class="form-control" name="novoSexo" value="<%= sexo %>" required>' +
                                '<option value="M">Masculino</option>' +
                                '<option value="F">Feminino</option>' +
                                '<option value="N/A">Indefinido</option>' +
                            '</select>' +
                        '</div>' +

                        //Localização
                        '<div class="form-group">' +
                            '<label class="control-label">Localização:</label><br>' +
                            '<input class="form-group col-6" type="text" name="novoEstadoDoador" value="<%= estado %>" required>' +
                            '<input class="form-group col-6" type="text" name="novaCidadeDoador" value="<%= cidade %>" required>' +
                            '<input class="form-group col-12" type="text" name="novaRuaDoador" value="<%= rua %>" required>' +
                        '</div>' +

                        //Telefone
                        '<div class="form-group">' +
                            '<label class="control-label">Telefone:</label><br>' +
                            '<input class="form-group col-12" type="text" name="novoNumDoador" value="<%= telefone %>" required>' +
                        '</div>' +

                        //Senha
                        '<div class="form-group">' +
                            '<label class="control-label">Senha:</label>' + 
                            '<input class="form-control" type="password" name="novaSenhaDoador" value="<%= senha %>" required>' +
                        '</div>' +

                        '<hr>' +
                        '<div class="row">' +
                            '<div class="col-12 justify-content-center">' +
                                '<button class="btn-success">Salvar</button>' +
                            '</div>' +
                        '</div' +

                    '</form>',

                    showCancelButton: false,
                    showCloseButton: true,
                    showConfirmButton: false
                })
            }

            function excluirDoador() {
                Swal.fire({
                    title: 'Excluir conta',
                    text: "Não é possível reverter esta ação!",
                    icon: 'warning',
                    html:

                    //Formulário
                    '<form action="/Excluir-Doador/<%= id %>?_method=DELETE" method="POST" ' +
                        '<div class="col-12 justify-content-center">' +
                                '<button class="btn-success">Confirmar</button>' +
                            '</div>' +
                    '</form>',

                    showCancelButton: false,
                    showCloseButton: true,
                    showConfirmButton: false
                })
            }

        </script>
        
        <%- include('../partials/BotaoDuvidasDoador') %>

        <%- include('../partials/footer') %>
        
        <%- include('../partials/java') %>

    </body>
</html>